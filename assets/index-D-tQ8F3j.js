function e(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import{S as t,d as a,r as l,c as s,a as n,o as i,b as o,t as r,e as c,u,C as d,f as v,F as p,g as m,n as h,h as f,i as g,w as x,j as w,k as y,l as b,m as k,p as _,q as S,s as C,v as D,x as M,D as j,P as I,Z as T,y as N,z as O,L as A,X as F,A as J,B as L,E as z,G as H,H as V,T as E,I as P,R as U,J as W,K as B,M as X,N as Y,O as q,Q as R,U as G,V as K,W as Q,Y as Z}from"./vendor-CVW5KTeu.js";function $(e){try{const a=t.fromDate(e),l=a.getLunar(),s=l.getMonthInChinese(),n=l.getDayInChinese(),i=l.getYearInGanZhiByLiChun(),o=l.getJieQi(),r=l.getFestivals(),c=a.getFestivals(),u=[...r,...c],d=u.length>0?u[0]:o||"",v="Âàù‰∏Ä"===n?"".concat(s,"Êúà"):n;return{fullDate:d?"".concat(v," ¬∑ ").concat(d):v,date:d||v,year:"".concat(i,"Âπ¥"),month:"".concat(s,"Êúà"),isFestival:!!d,festival:d}}catch(a){return console.error("Lunar date error (lunar-typescript):",a),{fullDate:"Âä†ËΩΩÂ§±Ë¥•",date:"Âä†ËΩΩÂ§±Ë¥•",year:"--Âπ¥",month:"Âä†ËΩΩÂ§±Ë¥•",isFestival:!1}}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ee={class:"full-screen-calendar text-white"},te={class:"flex items-center justify-between w-full mb-8 px-4 md:px-12"},ae={class:"text-left"},le={class:"text-4xl md:text-5xl font-bold tracking-widest"},se={class:"text-lg opacity-50 tracking-[0.4em] uppercase mt-1"},ne={class:"flex items-center gap-3"},ie={class:"flex-1 flex flex-col w-full"},oe={class:"grid grid-cols-7 mb-2"},re={class:"calendar-grid"},ce={class:"day-number-wrapper flex flex-col items-center justify-center"},ue={class:"text-2xl md:text-3xl font-bold"},de=(e,t)=>{const a=e.__vccOpts||e;for(const[l,s]of t)a[l]=s;return a},ve=de(a({__name:"CalendarView",setup(e,{expose:t}){const a=l(new Date),f=l(new Date),g=s(()=>a.value.getFullYear()),x=s(()=>a.value.getMonth()),w=["January","February","March","April","May","June","July","August","September","October","November","December"],y=s(()=>g.value===f.value.getFullYear()&&x.value===f.value.getMonth()),b=s(()=>{const e=g.value,t=x.value,a=new Date(e,t,1).getDay(),l=new Date(e,t+1,0).getDate(),s=new Date(e,t,0).getDate(),n=[];for(let o=a-1;o>=0;o--){const a=new Date(e,t-1,s-o);n.push({date:a,isOtherMonth:!0,lunar:$(a)})}for(let o=1;o<=l;o++){const a=new Date(e,t,o);n.push({date:a,isOtherMonth:!1,isToday:a.toDateString()===f.value.toDateString(),lunar:$(a)})}const i=42-n.length;for(let o=1;o<=i;o++){const a=new Date(e,t+1,o);n.push({date:a,isOtherMonth:!0,lunar:$(a)})}return n});function k(e){const t=new Date(a.value);t.setMonth(t.getMonth()+e),a.value=t}function _(){f.value=new Date,a.value=new Date}return t({refreshToday:function(){f.value=new Date,y.value&&(a.value=new Date)}}),(e,t)=>(i(),n("div",ee,[o("div",te,[o("div",ae,[o("h2",le,r(g.value)+"Âπ¥"+r(x.value+1)+"Êúà ",1),o("p",se,r(w[x.value]),1)]),o("div",ne,[o("button",{class:"p-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300",onClick:t[0]||(t[0]=e=>k(-1))},[c(u(d),{class:"w-6 h-6"})]),o("button",{class:"px-6 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300 text-md font-medium",onClick:_}," ‰ªäÂ§© "),o("button",{class:"p-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300",onClick:t[1]||(t[1]=e=>k(1))},[c(u(v),{class:"w-6 h-6"})])])]),o("div",ie,[o("div",oe,[(i(),n(p,null,m(["Êó•","‰∏Ä","‰∫å","‰∏â","Âõõ","‰∫î","ÂÖ≠"],e=>o("div",{key:e,class:"calendar-header-day text-xl font-bold"},r(e),1)),64))]),o("div",re,[(i(!0),n(p,null,m(b.value,(e,t)=>(i(),n("div",{key:t,class:h(["calendar-day",{"other-month":e.isOtherMonth,today:e.isToday}])},[o("div",ce,[o("span",ue,r(e.date.getDate()),1),o("span",{class:h(["lunar-text text-sm font-normal mt-1",e.lunar.isFestival?"text-blue-300 opacity-100":"opacity-60"])},r(e.lunar.date),3)])],2))),128))])])]))}}),[["__scopeId","data-v-f23083ca"]]);const pe={class:"digit-item"},me={class:"digit-item"},he=de(a({__name:"Digit",props:{value:{},trigger:{}},setup(e){const t=e,a=l(t.value),s=l(t.value),c=l(!1),u=l("rotate(".concat((12*Math.random()-6).toFixed(1),"deg)"));return x(()=>t.trigger,()=>{u.value="rotate(".concat((12*Math.random()-6).toFixed(1),"deg)")}),x(()=>t.value,(e,t)=>{e!==t&&(u.value="rotate(".concat((12*Math.random()-6).toFixed(1),"deg)"),s.value=e,c.value=!0,setTimeout(()=>{c.value=!1,a.value=e},800))}),f(()=>{a.value=t.value,s.value=t.value}),(e,t)=>(i(),n("div",{class:"digit-container",style:w({transform:u.value})},[o("div",{class:h(["digit-window",{animating:c.value}])},[o("div",pe,r(a.value),1),o("div",me,r(s.value),1)],2)],4))}}),[["__scopeId","data-v-ffa39005"]]),fe={sunny:"sun",cloudy:"cloud",rainy:"cloud-rain",snowy:"cloud-snow",storm:"cloud-lightning"};const ge={class:"flex items-center justify-center md:justify-start gap-6"},xe={id:"weather-icon",class:"w-24 h-24 float-anim text-white/90"},we={id:"weather-text",class:"text-4xl font-semibold tracking-wide"},ye={id:"location-text",class:"text-md text-white/60 uppercase tracking-widest mt-1"},be={class:"text-blue-400 text-xl tabular-nums"},ke={class:"flex items-center justify-center px-4 gap-6"},_e={class:"flex items-end"},Se={id:"temp-val",class:"text-8xl font-extralight mr-1"},Ce={class:"flex flex-col items-center justify-between gap-2"},De={id:"temp-max",class:"text-3xl font-medium text-red-200"},Me={id:"temp-min",class:"text-3xl font-medium text-blue-200"},je={class:"flex flex-col justify-center items-center md:items-end gap-3 text-white text-3xl tabular-nums"},Ie={class:"flex items-center gap-3"},Te={id:"humidity-val"},Ne={class:"flex items-center gap-3"},Oe={id:"apparent-temp-val"},Ae={id:"uv-val"},Fe=de(a({__name:"Weather",setup(e){const t=l(null),a=l(!0),s=l("ÂÆö‰Ωç‰∏≠..."),d=l({text:"ÁÇπÂáªÂà∑Êñ∞",type:"sunny"}),v={sun:D,cloud:C,"cloud-rain":S,"cloud-snow":_,"cloud-lightning":k};async function p(e,l,n){const i="https://api.open-meteo.com/v1/forecast?latitude=".concat(e,"&longitude=").concat(l,"&current_weather=true&hourly=relativehumidity_2m,apparent_temperature,visibility&daily=temperature_2m_max,temperature_2m_min,uv_index_max,precipitation_probability_max&timezone=auto");try{const r=await fetch(i),c=await r.json();t.value=c,d.value=0===(o=c.current_weather.weathercode)?{text:"Êô¥Êúó",type:"sunny"}:o<=3?{text:"Â§ö‰∫ë",type:"cloudy"}:o<=48?{text:"ÊúâÈõæ",type:"cloudy"}:o<=67?{text:"ÊúâÈõ®",type:"rainy"}:o<=77?{text:"ËêΩÈõ™",type:"snowy"}:o<=82?{text:"ÈòµÈõ®",type:"rainy"}:o<=86?{text:"Â§ßÈõ™",type:"snowy"}:o>=95?{text:"Èõ∑Êö¥",type:"storm"}:{text:"Êú™Áü•",type:"cloudy"},a.value=!1,n?s.value=n:s.value.includes("ÂÆö‰Ωç‰∏≠")&&(s.value="".concat(l.toFixed(2),", ").concat(e.toFixed(2)))}catch(r){d.value.text="Êé•Âè£ÈîôËØØ"}var o}async function m(){try{const e=await fetch("https://ipapi.co/json/"),t=await e.json(),a=t.city||"Êú™Áü•ÂüéÂ∏Ç";await p(t.latitude,t.longitude,"".concat(a,", ").concat(t.country_code))}catch(e){await p(39.9,116.4,"Âåó‰∫¨Â∏Ç (ÈªòËÆ§)")}}async function x(){a.value=!0;try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{const t=e.coords.latitude,a=e.coords.longitude,l=await async function(e,t){try{const a=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t,"&zoom=10&addressdetails=1"),{headers:{"Accept-Language":"zh-CN,zh;q=0.9"}}),l=await a.json();return l.address.city||l.address.town||l.address.village||l.address.county||"Êú™Áü•ÂüéÂ∏Ç"}catch(a){return"".concat(t.toFixed(2),", ").concat(e.toFixed(2))}}(t,a);await p(t,a,l)},async()=>await m(),{timeout:5e3}):await m()}catch(e){d.value.text="Êõ¥Êñ∞Ë∂ÖÊó∂",a.value=!1}}let w;return f(()=>{x(),w=window.setInterval(x,12e5)}),g(()=>{clearInterval(w)}),(e,l)=>(i(),n("div",{id:"weather-container",class:h(["weather-clickable grid grid-cols-1 md:grid-cols-3 gap-3 w-full pt-10 transition-opacity duration-700",{"opacity-30":a.value,"opacity-100":!a.value}]),onClick:x},[o("div",ge,[o("div",xe,[(i(),y(b(v[u(fe)[d.value.type]]),{class:"w-full h-full"}))]),o("div",null,[o("p",we,r(d.value.text),1),o("p",ye,[M(r(s.value)+" ¬∑ ÈôçÈõ® ",1),o("span",be,r(t.value?t.value.daily.precipitation_probability_max[0]:"--")+"%",1)])])]),o("div",ke,[o("div",_e,[o("div",Se,r(t.value?Math.round(t.value.current_weather.temperature):"--"),1),l[0]||(l[0]=o("div",{class:"text-3xl font-light opacity-70 mb-12"}," ¬∞C ",-1))]),o("div",Ce,[o("span",De,r(t.value?Math.round(t.value.daily.temperature_2m_max[0]):"--")+"¬∞ ",1),o("span",Me,r(t.value?Math.round(t.value.daily.temperature_2m_min[0]):"--")+"¬∞ ",1)])]),o("div",je,[o("div",Ie,[o("span",Te,r(t.value?t.value.hourly.relativehumidity_2m[0]:"--")+"% ",1),c(u(j),{class:"w-8 h-8 text-blue-500/60"})]),o("div",Ne,[o("span",Oe,r(t.value?Math.round(t.value.hourly.apparent_temperature[0]):"--")+"¬∞C ",1),c(u(I),{class:"w-8 h-8 text-orange-500/60"}),o("span",Ae,r(t.value?Math.round(t.value.daily.uv_index_max[0]):"--"),1),c(u(T),{class:"w-8 h-8 text-yellow-500/60"})])])],2))}}),[["__scopeId","data-v-455b8e62"]]),Je={class:"glass-panel h-full p-4 md:p-8 flex flex-col items-center justify-evenly text-white w-full"},Le={class:"flex flex-col md:flex-row items-center md:items-start gap-6 w-full justify-center"},ze={class:"flex items-center gap-4"},He={class:"date-day-big text-glow"},Ve={class:"flex flex-col mt-2"},Ee={class:"text-5xl tracking-[0.2em] opacity-90 uppercase"},Pe={class:"text-4xl tracking-[0.2em] font-light opacity-70 mt-1"},Ue={class:"flex flex-col items-center md:items-start mt-5"},We={class:"text-5xl font-medium text-white/90 tracking-wider"},Be={class:"text-4xl tracking-[0.2em] font-light opacity-70 mt-2"},Xe={key:0,class:"clock-separator second-separator"},Ye=de(a({__name:"ClockWeather",setup(e){const{h1:t,h2:a,m1:s,m2:d,s1:v,s2:m,lunar:x,now:w,showSeconds:y}=function(){const e=l(new Date),t=l(0),a=l(0),s=l(0),n=l(0),i=l(0),o=l(0),r=l($(new Date)),c=l(!1);let u;const d=()=>{const l=new Date;e.value=l;const c=String(l.getHours()).padStart(2,"0"),u=String(l.getMinutes()).padStart(2,"0"),d=String(l.getSeconds()).padStart(2,"0");t.value=Number.parseInt(c[0]),a.value=Number.parseInt(c[1]),s.value=Number.parseInt(u[0]),n.value=Number.parseInt(u[1]),i.value=Number.parseInt(d[0]),o.value=Number.parseInt(d[1]),0===l.getHours()&&0===l.getMinutes()&&0===l.getSeconds()&&(r.value=$(l))};return f(()=>{d(),u=window.setInterval(d,1e3),r.value=$(new Date)}),g(()=>{clearInterval(u)}),{now:e,h1:t,h2:a,m1:s,m2:n,s1:i,s2:o,lunar:r,showSeconds:c}}();function b(){y.value=!y.value}return(e,l)=>(i(),n("div",Je,[o("div",Le,[o("div",ze,[o("div",He,r(u(w).getDate()),1),o("div",Ve,[o("span",Ee,r(u(w).toLocaleDateString("zh-CN",{weekday:"long"})),1),o("span",Pe,r(u(w).getFullYear())+"Âπ¥"+r(u(w).getMonth()+1)+"Êúà ",1)])]),l[0]||(l[0]=o("div",{class:"hidden md:block w-px h-16 mx-16 self-center"},null,-1)),o("div",Ue,[o("span",We,r(u(x).fullDate),1),o("span",Be,r(u(x).year)+r(u(x).month),1)])]),o("div",{class:h(["clock-display text-glow tabular-nums mb-4 cursor-pointer transition-all duration-500",{"with-seconds":u(y)}]),onClick:b},[c(he,{value:u(t),trigger:u(y)?u(w).getTime():Math.floor(u(w).getTime()/6e4)},null,8,["value","trigger"]),c(he,{value:u(a),trigger:u(y)?u(w).getTime():Math.floor(u(w).getTime()/6e4)},null,8,["value","trigger"]),l[1]||(l[1]=o("div",{class:"clock-separator"}," : ",-1)),c(he,{value:u(s),trigger:u(y)?u(w).getTime():Math.floor(u(w).getTime()/6e4)},null,8,["value","trigger"]),c(he,{value:u(d),trigger:u(y)?u(w).getTime():Math.floor(u(w).getTime()/6e4)},null,8,["value","trigger"]),u(y)?(i(),n("div",Xe," : ")):N("",!0),u(y)?(i(),n(p,{key:1},[c(he,{class:"second-digit",value:u(v),trigger:u(w).getTime()},null,8,["value","trigger"]),c(he,{class:"second-digit",value:u(m),trigger:u(w).getTime()},null,8,["value","trigger"])],64)):N("",!0)],2),c(Fe)]))}}),[["__scopeId","data-v-53ba618e"]]),qe={key:0,id:"settings-modal",class:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 md:p-6 z-[1000]"},Re={class:"bg-neutral-900 p-6 md:p-8 rounded-[40px] border border-white/10 w-full max-w-2xl text-white max-h-[90vh] flex flex-col relative"},Ge={class:"flex items-center justify-between mb-6 flex-shrink-0"},Ke={class:"flex items-center gap-2"},Qe={class:"space-y-6 overflow-y-auto pr-2 flex-1"},Ze={key:0,class:"space-y-6"},$e={class:"space-y-4"},et={class:"space-y-3"},tt={class:"flex flex-col gap-1"},at=["onClick"],lt=["onClick"],st=["onUpdate:modelValue"],nt=["onUpdate:modelValue","placeholder"],it=["onClick"],ot={key:1,class:"space-y-3"},rt=a({__name:"SettingsModal",props:{show:{type:Boolean},entitiesStates:{}},emits:["close","saved"],setup(e,{emit:t}){const a=e,s=t,r=l(JSON.parse(localStorage.getItem("ha_config")||'{"url":"","token":"","entities":[]}')),d=l(!1),v=l("");function h(){r.value.entities.push({id:"",name:""})}function f(e,t){const a=e+t;if(a>=0&&a<r.value.entities.length){const t=r.value.entities[e];r.value.entities[e]=r.value.entities[a],r.value.entities[a]=t}}function g(){if(d.value)try{const e=JSON.parse(v.value);if(!e||"object"!=typeof e)throw new Error("Must be an object");r.value.url=e.url||"",r.value.token=e.token||"",r.value.entities=Array.isArray(e.entities)?e.entities:[]}catch(e){return void alert("JSON Ê†ºÂºèÈîôËØØÔºå‰øùÂ≠òÂ§±Ë¥•")}localStorage.setItem("ha_config",JSON.stringify(r.value)),s("saved"),s("close")}return x(d,e=>{if(e)v.value=JSON.stringify({url:r.value.url,token:r.value.token,entities:r.value.entities},null,2);else try{const e=JSON.parse(v.value);e&&"object"==typeof e&&(void 0!==e.url&&(r.value.url=e.url),void 0!==e.token&&(r.value.token=e.token),Array.isArray(e.entities)&&(r.value.entities=e.entities))}catch(t){alert("JSON Ê†ºÂºèÈîôËØØÔºåËØ∑Ê£ÄÊü•ÂêéÂÜçÂàáÊç¢Ê®°Âºè"),setTimeout(()=>{d.value=!0},0)}}),(t,l)=>e.show?(i(),n("div",qe,[o("div",{class:"absolute top-0 left-0 right-0 bottom-0 bg-black/80",onClick:l[0]||(l[0]=e=>s("close"))}),o("div",Re,[o("div",Ge,[l[8]||(l[8]=o("h3",{class:"text-2xl font-bold"}," Home Assistant ÈÖçÁΩÆ ",-1)),o("div",Ke,[o("button",{class:"text-xs flex items-center gap-1.5 opacity-50 hover:opacity-100 transition-all px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg border border-white/5",onClick:l[1]||(l[1]=e=>d.value=!d.value)},[d.value?(i(),n(p,{key:1},[c(u(A),{class:"w-3.5 h-3.5"}),l[7]||(l[7]=M(" ÂàóË°®Ê®°Âºè ",-1))],64)):(i(),n(p,{key:0},[c(u(O),{class:"w-3.5 h-3.5"}),l[6]||(l[6]=M(" JSON Ê®°Âºè ",-1))],64))]),o("button",{class:"opacity-50 hover:opacity-100 p-2",onClick:l[2]||(l[2]=e=>s("close"))},[c(u(F),{class:"w-6 h-6"})])])]),o("div",Qe,[d.value?(i(),n("div",ot,[J(o("textarea",{"onUpdate:modelValue":l[5]||(l[5]=e=>v.value=e),rows:"18",class:"w-full bg-white/5 border border-white/10 text-white font-mono text-sm rounded-xl px-4 py-3 outline-none focus:border-white/30",placeholder:'{"url": "http://...", "token": "...", "entities": [{"id": "light.living_room", "name": "ÂÆ¢ÂéÖÁÅØ"}]}'},null,512),[[L,v.value]]),l[13]||(l[13]=o("div",{class:"flex justify-between items-center text-[10px] opacity-30 px-1"},[o("span",null,"ÊîØÊåÅÂú∞ÂùÄ„ÄÅ‰ª§Áâå„ÄÅËÆæÂ§áÂàóË°®ÂÖ®ÈáèÂØºÂÖ•ÂØºÂá∫"),o("span",null,'Ê†ºÂºè: { "url": "...", "token": "...", "entities": [...] }')],-1)),l[14]||(l[14]=o("div",{class:"mt-4 p-4 bg-orange-500/10 border border-orange-500/20 rounded-xl"},[o("p",{class:"text-xs text-orange-200/60 leading-relaxed"},[o("strong",null,"üí° Ë∑®ÂüüÊèêÁ§∫Ôºö"),M(" Â¶ÇÊûúÊé•Âè£Êó†Ê≥ïÂä†ËΩΩÔºåËØ∑Á°Æ‰øùÂú® Home Assistant ÁöÑ "),o("code",null,"configuration.yaml"),M(" ‰∏≠ÈÖçÁΩÆ‰∫Ü "),o("code",null,"cors_allowed_origins"),M("ÔºåÂåÖÂê´ÂΩìÂâçÁúãÊùøÁöÑËÆøÈóÆÂüüÂêçÊàñ IP„ÄÇ ")])],-1))])):(i(),n("div",Ze,[o("div",null,[l[9]||(l[9]=o("label",{class:"block text-sm opacity-50 mb-2 uppercase tracking-widest"},"HA Âú∞ÂùÄ",-1)),J(o("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.url=e),type:"text",placeholder:"http://192.168.1.xxx:8123",class:"w-full bg-white/5 border border-white/10 text-white rounded-xl px-4 py-3 outline-none focus:border-white/30"},null,512),[[L,r.value.url]])]),o("div",null,[l[10]||(l[10]=o("label",{class:"block text-sm opacity-50 mb-2 uppercase tracking-widest"},"ÈïøÊúüËÆøÈóÆ‰ª§Áâå",-1)),J(o("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>r.value.token=e),type:"password",placeholder:"ËæìÂÖ•‰ª§Áâå",class:"w-full bg-white/5 border border-white/10 text-white rounded-xl px-4 py-3 outline-none focus:border-white/30"},null,512),[[L,r.value.token]])]),o("div",$e,[l[12]||(l[12]=o("label",{class:"block text-sm opacity-50 uppercase tracking-widest"},"ËÆæÂ§áÂàóË°®",-1)),o("div",et,[(i(!0),n(p,null,m(r.value.entities,(e,t)=>{var l,s,d;return i(),n("div",{key:t,class:"flex gap-2"},[o("div",tt,[o("button",{class:"p-1 opacity-30 hover:opacity-100 transition-opacity",onClick:e=>f(t,-1)},[c(u(H),{class:"w-4 h-4"})],8,at),o("button",{class:"p-1 opacity-30 hover:opacity-100 transition-opacity",onClick:e=>f(t,1)},[c(u(V),{class:"w-4 h-4"})],8,lt)]),J(o("input",{"onUpdate:modelValue":t=>e.id=t,type:"text",class:"flex-1 bg-white/5 border border-white/10 text-white rounded-xl px-4 py-2 outline-none focus:border-white/30",placeholder:"ÂÆû‰Ωì ID"},null,8,st),[[L,e.id]]),J(o("input",{"onUpdate:modelValue":t=>e.name=t,type:"text",class:"w-24 md:w-32 bg-white/5 border border-white/10 text-white rounded-xl px-4 py-2 outline-none focus:border-white/30",placeholder:(null==(d=null==(s=null==(l=a.entitiesStates)?void 0:l[e.id])?void 0:s.attributes)?void 0:d.friendly_name)||"Â§áÊ≥®Âêç"},null,8,nt),[[L,e.name]]),o("button",{class:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",onClick:e=>function(e){r.value.entities.splice(e,1)}(t)},[c(u(E),{class:"w-5 h-5"})],8,it)])}),128)),o("button",{class:"flex items-center gap-2 text-sm opacity-70 hover:opacity-100 transition-all mt-2 bg-white/5 px-4 py-2 rounded-xl w-full justify-center border border-dashed border-white/10 hover:border-white/20",onClick:h},[c(u(z),{class:"w-5 h-5"}),l[11]||(l[11]=M(" Ê∑ªÂä†ËÆæÂ§á ",-1))])])])]))]),o("div",{class:"pt-6 mt-2 border-t border-white/10 flex-shrink-0"},[o("button",{class:"w-full py-4 bg-white text-black font-bold rounded-2xl hover:bg-opacity-90 transition-all shadow-xl",onClick:g}," ‰øùÂ≠òÂπ∂Â∫îÁî® ")])])])):N("",!0)}}),ct={class:"glass-panel p-8 md:p-14 flex flex-col items-center text-white h-full justify-start overflow-y-auto w-full"},ut={class:"flex items-center justify-between w-full mb-10"},dt={class:"flex items-baseline gap-6"},vt={key:0,class:"flex items-center gap-6 opacity-60"},pt={key:0,class:"flex items-center gap-2"},mt={class:"text-2xl font-medium tabular-nums"},ht={key:1,class:"flex items-center gap-2"},ft={class:"text-2xl font-medium tabular-nums"},gt={class:"flex gap-4"},xt={key:0,id:"ha-entities",class:"grid grid-cols-2 md:grid-cols-3 gap-6 w-full"},wt=["onClick"],yt={class:"flex items-center justify-between w-full"},bt={key:0,class:"flex gap-4 text-sm font-medium opacity-80"},kt={key:0,class:"flex items-center gap-1.5"},_t={class:"text-base"},St={key:1,class:"flex items-center gap-1.5"},Ct={class:"text-base"},Dt={class:"flex flex-col overflow-hidden w-full"},Mt={class:"font-bold text-lg truncate w-full"},jt={class:"text-sm opacity-50 uppercase tracking-widest"},It={key:1,class:"col-span-full text-center py-20 opacity-50"},Tt=de(a({__name:"SmartHome",emits:["openSettings"],setup(e,{expose:t,emit:a}){const d=a,v=l(JSON.parse(localStorage.getItem("ha_config")||'{"url":"","token":"","entities":[]}')),g=l({}),x=l({}),w=l(!1),k=s(()=>{const e=v.value.entities.find(e=>e.id.startsWith("climate."));if(!e)return null;const t=g.value[e.id];if(!t||!t.attributes)return null;const{current_temperature:a,current_humidity:l}=t.attributes;return void 0===a&&void 0===l?null:{temp:a,humi:l}});function _(e){var t;const a=null==(t=g.value[e])?void 0:t.state;return e.startsWith("cover.")?"open"===a:e.startsWith("climate.")?"off"!==a&&"unavailable"!==a:"on"===a}async function S(e){if(v.value.url&&v.value.token)try{const t=await fetch("".concat(v.value.url,"/api/states/").concat(e),{headers:{Authorization:"Bearer ".concat(v.value.token)}}),a=await t.json();g.value[e]=a}catch(t){console.error("HA Fetch Error:",t)}}async function C(){w.value=!0;const e=localStorage.getItem("ha_config");if(e&&(v.value=JSON.parse(e)),!v.value.url||!v.value.token)return void(w.value=!1);const t=v.value.entities.map(e=>S(e.id));await Promise.all(t),setTimeout(()=>{w.value=!1},500)}return f(()=>{C()}),t({updateAllStates:C,entitiesStates:g}),(e,t)=>(i(),n("div",ct,[o("div",ut,[o("div",dt,[t[1]||(t[1]=o("h2",{class:"text-4xl font-bold tracking-widest text-nowrap"}," Êô∫ËÉΩÊéßÂà∂ ",-1)),k.value?(i(),n("div",vt,[void 0!==k.value.temp?(i(),n("div",pt,[c(u(P),{class:"w-5 h-5 text-orange-400"}),o("span",mt,r(k.value.temp)+"¬∞",1)])):N("",!0),void 0!==k.value.humi?(i(),n("div",ht,[c(u(j),{class:"w-5 h-5 text-blue-400"}),o("span",ft,r(k.value.humi)+"%",1)])):N("",!0)])):N("",!0)]),o("div",gt,[o("button",{class:h(["p-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all",{"opacity-50 pointer-events-none":w.value}]),onClick:C},[c(u(U),{class:h(["w-6 h-6",{"animate-spin":w.value}])},null,8,["class"])],2),o("button",{class:"p-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all",onClick:t[0]||(t[0]=e=>d("openSettings"))},[c(u(W),{class:"w-6 h-6"})])])]),v.value.url&&v.value.token?(i(),n("div",xt,[(i(!0),n(p,null,m(v.value.entities,e=>{var t,a,l,s,d;return i(),n("div",{key:e.id,class:h(["ha-card",{on:_(e.id),"opacity-50 pointer-events-none":x.value[e.id]}]),onClick:t=>async function(e){const t=e.split(".")[0],a=_(e);let l="";l="cover"===t?a?"close_cover":"open_cover":a?"turn_off":"turn_on",x.value[e]=!0;try{await fetch("".concat(v.value.url,"/api/services/").concat(t,"/").concat(l),{method:"POST",headers:{Authorization:"Bearer ".concat(v.value.token),"Content-Type":"application/json"},body:JSON.stringify({entity_id:e})}),setTimeout(()=>S(e).then(()=>{x.value[e]=!1}),500)}catch(s){alert("Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúÂíåÈÖçÁΩÆ"),x.value[e]=!1}}(e.id)},[o("div",yt,[o("div",{class:h(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",_(e.id)?"bg-white text-black":"bg-white/10 text-white"])},[x.value[e.id]?(i(),y(u(B),{key:0,class:"w-6 h-6 animate-spin"})):(i(),y(b((s=e.id.split(".")[0],d=_(e.id),"light"===s?d?X:Y:"switch"===s?q:"fan"===s?R:"media_player"===s?G:"cover"===s?K:"climate"===s?Q:T)),{key:1,class:"w-6 h-6"}))],2),e.id.startsWith("climate.")&&(null==(t=g.value[e.id])?void 0:t.attributes)?(i(),n("div",bt,[void 0!==g.value[e.id].attributes.current_temperature?(i(),n("div",kt,[c(u(P),{class:"w-4 h-4 text-orange-400"}),o("span",_t,r(g.value[e.id].attributes.current_temperature)+"¬∞",1)])):N("",!0),void 0!==g.value[e.id].attributes.current_humidity?(i(),n("div",St,[c(u(j),{class:"w-4 h-4 text-blue-400"}),o("span",Ct,r(g.value[e.id].attributes.current_humidity)+"%",1)])):N("",!0)])):N("",!0)]),o("div",Dt,[o("span",Mt,r(e.name||g.value[e.id]&&g.value[e.id].attributes&&g.value[e.id].attributes.friendly_name||e.id),1),o("span",jt,[e.id.startsWith("climate.")&&_(e.id)?(i(),n(p,{key:0},[M(r((null==(l=null==(a=g.value[e.id])?void 0:a.attributes)?void 0:l.temperature)?"".concat(g.value[e.id].attributes.temperature,"¬∞C"):"Â∑≤ÂºÄÂêØ"),1)],64)):(i(),n(p,{key:1},[M(r(_(e.id)?"Â∑≤ÂºÄÂêØ":"Â∑≤ÂÖ≥Èó≠"),1)],64))])])],10,wt)}),128))])):(i(),n("div",It,[...t[2]||(t[2]=[o("p",null,"ËØ∑ÁÇπÂáªÂè≥‰∏äËßíËÆæÁΩÆ Home Assistant Âú∞ÂùÄÂíå‰ª§Áâå",-1)])]))]))}}),[["__scopeId","data-v-ac959409"]]),Nt={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},Ot={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},At={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"};Z(de(a({__name:"App",setup(e){const t=l(1),a=l(!1),s=l(null),r=l(null);let u=0,d=null;function v(){d&&(clearTimeout(d),d=null),1!==t.value&&(d=window.setTimeout(()=>{p(1)},3e4))}function p(e){t.value=e,v(),0===e&&s.value&&s.value.updateAllStates(),2===e&&r.value&&r.value.refreshToday()}function m(e){u=e.touches[0].clientX,v()}function h(e){const a=e.changedTouches[0].clientX,l=u-a;Math.abs(l)>50&&(l>0&&t.value<2?p(t.value+1):l<0&&t.value>0&&p(t.value-1))}function x(e){u=e.clientX,v()}function y(e){const a=u-e.clientX;Math.abs(a)>50&&(a>0&&t.value<2?p(t.value+1):a<0&&t.value>0&&p(t.value-1))}function b(){s.value&&s.value.updateAllStates()}return f(()=>{window.addEventListener("keydown",v),window.addEventListener("click",v)}),g(()=>{window.removeEventListener("keydown",v),window.removeEventListener("click",v),d&&clearTimeout(d)}),(e,l)=>{var u;return i(),n("div",{class:"viewport-container overflow-hidden relative w-screen h-screen bg-black",onTouchstart:m,onTouchend:h,onMousedown:x,onMouseup:y},[l[2]||(l[2]=o("div",{class:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-900/10 rounded-full blur-3xl"},null,-1)),l[3]||(l[3]=o("div",{class:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-900/10 rounded-full blur-3xl"},null,-1)),o("div",{class:"main-slider flex h-full transition-transform duration-700 cubic-bezier",style:w({transform:"translateX(-".concat(100*t.value,"vw)"),width:"300vw"})},[o("div",Nt,[c(Tt,{ref_key:"smartHomeRef",ref:s,onOpenSettings:l[0]||(l[0]=e=>a.value=!0)},null,512)]),o("div",Ot,[c(Ye)]),o("div",At,[c(ve,{ref_key:"calendarRef",ref:r},null,512)])],4),c(rt,{show:a.value,"entities-states":(null==(u=s.value)?void 0:u.entitiesStates)||{},onClose:l[1]||(l[1]=e=>a.value=!1),onSaved:b},null,8,["show","entities-states"])],32)}}}),[["__scopeId","data-v-77884379"]])).mount("#app");export{e as __vite_legacy_guard};
