var e=Object.defineProperty,t=(t,a,l)=>((t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l)(t,"symbol"!=typeof a?a+"":a,l);function a(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import{S as l,d as s,r as n,c as o,a as i,o as r,b as c,t as u,e as d,u as h,C as v,f,F as p,g as m,n as w,h as g,i as y,w as x,j as b,k,s as M,l as _,m as S,X as C,p as T,v as E,q as I,R as L,x as D,D as j,P as N,Z as A,T as O,y as F,z as P,L as z,A as R,B as W,E as J,G as H,H as U,I as V,J as B,K as Y,M as $,N as q,O as X,Q as G,U as K,V as Q,W as Z,Y as ee,_ as te,$ as ae,a0 as le,a1 as se}from"./vendor-YscSnix7.js";function ne(e){try{const t=l.fromDate(e),a=t.getLunar(),s=a.getMonthInChinese(),n=a.getDayInChinese(),o=a.getYearInGanZhiByLiChun(),i=a.getJieQi(),r=a.getFestivals(),c=t.getFestivals(),u=[...r,...c],d=u.length>0?u[0]:i||"",h="åˆä¸€"===n?"".concat(s,"æœˆ"):n;return{fullDate:d?"".concat(h," Â· ").concat(d):h,date:d||h,year:"".concat(o,"å¹´"),month:"".concat(s,"æœˆ"),isFestival:!!d,festival:d}}catch(t){return console.error("Lunar date error (lunar-typescript):",t),{fullDate:"åŠ è½½å¤±è´¥",date:"åŠ è½½å¤±è´¥",year:"--å¹´",month:"åŠ è½½å¤±è´¥",isFestival:!1}}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const oe={class:"full-screen-calendar text-white"},ie={class:"flex items-center justify-between w-full mb-8 px-4 md:px-12"},re={class:"text-left"},ce={class:"text-4xl md:text-5xl font-bold tracking-widest"},ue={class:"text-lg opacity-50 tracking-[0.4em] uppercase mt-1"},de={class:"flex items-center gap-3"},he={class:"flex-1 flex flex-col w-full"},ve={class:"grid grid-cols-7 mb-2"},fe={class:"calendar-grid"},pe={class:"day-number-wrapper flex flex-col items-center justify-center"},me={class:"text-2xl md:text-3xl font-bold"},we=(e,t)=>{const a=e.__vccOpts||e;for(const[l,s]of t)a[l]=s;return a},ge=we(s({__name:"CalendarView",setup(e,{expose:t}){const a=n(new Date),l=n(new Date),s=o(()=>a.value.getFullYear()),g=o(()=>a.value.getMonth()),y=["January","February","March","April","May","June","July","August","September","October","November","December"],x=o(()=>s.value===l.value.getFullYear()&&g.value===l.value.getMonth()),b=o(()=>{const e=s.value,t=g.value,a=new Date(e,t,1).getDay(),n=new Date(e,t+1,0).getDate(),o=new Date(e,t,0).getDate(),i=[];for(let l=a-1;l>=0;l--){const a=new Date(e,t-1,o-l);i.push({date:a,isOtherMonth:!0,lunar:ne(a)})}for(let s=1;s<=n;s++){const a=new Date(e,t,s);i.push({date:a,isOtherMonth:!1,isToday:a.toDateString()===l.value.toDateString(),lunar:ne(a)})}const r=42-i.length;for(let l=1;l<=r;l++){const a=new Date(e,t+1,l);i.push({date:a,isOtherMonth:!0,lunar:ne(a)})}return i});function k(e){const t=new Date(a.value);t.setMonth(t.getMonth()+e),a.value=t}function M(){l.value=new Date,a.value=new Date}return t({refreshToday:function(){l.value=new Date,x.value&&(a.value=new Date)}}),(e,t)=>(r(),i("div",oe,[c("div",ie,[c("div",re,[c("h2",ce,u(s.value)+"å¹´"+u(g.value+1)+"æœˆ ",1),c("p",ue,u(y[g.value]),1)]),c("div",de,[c("button",{class:"p-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300",onClick:t[0]||(t[0]=e=>k(-1))},[d(h(v),{class:"w-6 h-6"})]),c("button",{class:"px-6 py-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300 text-md font-medium",onClick:M}," ä»Šå¤© "),c("button",{class:"p-2 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all duration-300",onClick:t[1]||(t[1]=e=>k(1))},[d(h(f),{class:"w-6 h-6"})])])]),c("div",he,[c("div",ve,[(r(),i(p,null,m(["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"],e=>c("div",{key:e,class:"calendar-header-day text-xl font-bold"},u(e),1)),64))]),c("div",fe,[(r(!0),i(p,null,m(b.value,(e,t)=>(r(),i("div",{key:t,class:w(["calendar-day",{"other-month":e.isOtherMonth,today:e.isToday}])},[c("div",pe,[c("span",me,u(e.date.getDate()),1),c("span",{class:w(["lunar-text text-sm font-normal mt-1",e.lunar.isFestival?"text-blue-300 opacity-100":"opacity-60"])},u(e.lunar.date),3)])],2))),128))])])]))}}),[["__scopeId","data-v-f23083ca"]]);function ye(){const e=n(new Date),t=n(0),a=n(0),l=n(0),s=n(0),o=n(0),i=n(0),r=n(ne(new Date)),c=n(!1);let u;const d=()=>{const n=new Date;e.value=n;const c=String(n.getHours()).padStart(2,"0"),u=String(n.getMinutes()).padStart(2,"0"),d=String(n.getSeconds()).padStart(2,"0");t.value=Number.parseInt(c[0]),a.value=Number.parseInt(c[1]),l.value=Number.parseInt(u[0]),s.value=Number.parseInt(u[1]),o.value=Number.parseInt(d[0]),i.value=Number.parseInt(d[1]),0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&(r.value=ne(n))};return g(()=>{d(),u=window.setInterval(d,1e3),r.value=ne(new Date)}),y(()=>{clearInterval(u)}),{now:e,h1:t,h2:a,m1:l,m2:s,s1:o,s2:i,lunar:r,showSeconds:c}}const xe={class:"digit-item"},be={class:"digit-item"},ke=we(s({__name:"Digit",props:{value:{},trigger:{},showSeconds:{type:Boolean}},setup(e){const t=e,a=n(t.value),l=n(t.value),s=n(!1),o=n("rotate(".concat((12*Math.random()-6).toFixed(1),"deg)"));return x(()=>t.trigger,()=>{o.value="rotate(".concat((12*Math.random()-6).toFixed(1),"deg)")}),x(()=>t.value,(e,t)=>{e!==t&&(o.value="rotate(".concat((12*Math.random()-6).toFixed(1),"deg)"),l.value=e,s.value=!0,setTimeout(()=>{s.value=!1,a.value=e},800))}),g(()=>{a.value=t.value,l.value=t.value}),(t,n)=>(r(),i("div",{class:w(["digit-container",{"show-seconds":e.showSeconds}]),style:b({transform:o.value})},[c("div",{class:w(["digit-window",{animating:s.value}])},[c("div",xe,u(a.value),1),c("div",be,u(l.value),1)],2)],6))}}),[["__scopeId","data-v-b3b994b7"]]);function Me(e,t=!0){const a="./weather-icons/".concat(-1===e?"not-available":0===e?t?"clear-day":"clear-night":1===e||2===e?t?"partly-cloudy-day":"partly-cloudy-night":3===e?"overcast":45===e||48===e?t?"fog-day":"fog-night":e>=51&&e<=55?"drizzle":e>=61&&e<=65?"rain":66===e||67===e?"sleet":e>=71&&e<=77?"snow":e>=80&&e<=82?t?"partly-cloudy-day-rain":"partly-cloudy-night-rain":85===e||86===e?t?"partly-cloudy-day-snow":"partly-cloudy-night-snow":e>=95?t?"thunderstorms-day-rain":"thunderstorms-night-rain":t?"clear-day":"clear-night",".svg");return{text:{0:"æ™´æœ—",1:"æ™´é—´å¤šäº‘",2:"å¤šäº‘",3:"é˜´",45:"é›¾",48:"æ²‰ç§¯é›¾",51:"å°æ¯›æ¯›é›¨",53:"æ¯›æ¯›é›¨",55:"å¤§æ¯›æ¯›é›¨",56:"è½»å¾®å†»æ¯›æ¯›é›¨",57:"å†»æ¯›æ¯›é›¨",61:"å°é›¨",63:"ä¸­é›¨",65:"å¤§é›¨",66:"è½»å¾®å†»é›¨",67:"å†»é›¨",71:"å°é›ª",73:"ä¸­é›ª",75:"å¤§é›ª",77:"é›ªç²’",80:"å°é˜µé›¨",81:"é˜µé›¨",82:"å¼ºé˜µé›¨",85:"å°é˜µé›ª",86:"é˜µé›ª",95:"é›·é˜µé›¨",96:"é›·é›¨ä¼´æœ‰å†°é›¹",99:"å¼ºé›·é›¨ä¼´å†°é›¹"}[e]||"æœªçŸ¥",icon:a}}const _e=k("weather",()=>{const e=n("auto"),t=n(39.9),a=n(116.4),l=n("åŒ—äº¬å¸‚"),s=n(20),o=n(!0),i=n(!0),r=n(!0),c=n(null),u=n(!1),d=n("å®šä½ä¸­..."),h=n({text:"ç‚¹å‡»åˆ·æ–°",icon:Me(-1).icon}),v=n(null);async function f(e,t,a,l=!1){const s="https://api.open-meteo.com/v1/forecast?latitude=".concat(e,"&longitude=").concat(t,"&current=temperature_2m,rain,wind_speed_10m,is_day,apparent_temperature,showers,relative_humidity_2m,precipitation,weather_code&hourly=precipitation_probability,uv_index,temperature_2m&timezone=auto&forecast_days=1");try{const n=await fetch(s),o=await n.json(),i=(new Date).getHours();o.current_hour_index=i,c.value=o,h.value=Me(o.current.weather_code,1===o.current.is_day),u.value=!1,a?(d.value=a,l&&(v.value={lat:e,lon:t,city:a})):d.value.includes("å®šä½ä¸­")&&(d.value="".concat(t.toFixed(2),", ").concat(e.toFixed(2)))}catch(n){h.value.text="æŽ¥å£é”™è¯¯",h.value.icon=Me(-1).icon,u.value=!1}}function p(e){if(!e)return e;const t=e.split(";");return t.length>1?t[0].trim():e}async function m(e){try{const t=e.trim();if(!t)return[];const a=new URL("https://nominatim.openstreetmap.org/search");a.searchParams.set("q",t),a.searchParams.set("format","json"),a.searchParams.set("limit","3"),a.searchParams.set("accept-language","zh-CN"),a.searchParams.set("addressdetails","1");const l=await fetch(a.toString(),{headers:{"User-Agent":"ClockDashboard/1.0"}}),s=await l.json();return Array.isArray(s)&&s.length>0?s.map(e=>{const a=e.name||"",l=e.display_name||"",s=p(a.split(",")[0]||a),n=function(e){return e?e.split(",").map(e=>p(e)).join(", "):e}(l);return{name:s||t,displayName:n||s||t,latitude:Number.parseFloat(e.lat),longitude:Number.parseFloat(e.lon)}}):[]}catch(t){return[]}}async function w(e,t){try{const a=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e,"&longitude=").concat(t,"&localityLanguage=zh")),l=await a.json();return l.city||l.locality||l.principalSubdivision||"æœªçŸ¥åŸŽå¸‚"}catch(a){return"".concat(t.toFixed(2),", ").concat(e.toFixed(2))}}async function g(){try{const e=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?localityLanguage=zh"),t=await e.json();if(!t.latitude||!t.longitude)throw new Error("å®šä½å¤±è´¥");{const e=t.city||t.locality||t.principalSubdivision||"æœªçŸ¥åŸŽå¸‚";await f(t.latitude,t.longitude,e,!0)}}catch(e){await f(39.9,116.4,"åŒ—äº¬å¸‚ (é»˜è®¤)")}}return x(e,e=>{"auto"===e&&(v.value=null,d.value="å®šä½ä¸­...")},{flush:"sync"}),{locationMode:e,customLat:t,customLon:a,customCity:l,refreshInterval:s,showRainEffect:o,showThunderEffect:i,showSnowEffect:r,weatherData:c,loading:u,locationText:d,weatherInfo:h,updateWeather:async function(){if(u.value=!0,"coords"===e.value){const e=await w(t.value,a.value);return void(await f(t.value,a.value,e))}if("city"!==e.value){if("auto"===e.value&&v.value){const{lat:e,lon:t,city:a}=v.value;return void(await f(e,t,a,!0))}d.value="å®šä½ä¸­...";try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{const t=e.coords.latitude,a=e.coords.longitude,l=await w(t,a);await f(t,a,l,!0)},async()=>await g(),{timeout:5e3}):await g()}catch(s){h.value.text="æ›´æ–°è¶…æ—¶",u.value=!1}}else await async function(e){try{const t=e.trim();if(!t)throw new Error("åŸŽå¸‚åç§°ä¸èƒ½ä¸ºç©º");const a=await m(t);if(!(a.length>0))throw new Error("æ‰¾ä¸åˆ°åŸŽå¸‚");{const e=a[0];await f(e.latitude,e.longitude,e.name,!0)}}catch(t){h.value.text="object"==typeof t&&null!==t&&"message"in t?t.message:"åŸŽå¸‚æœç´¢å¤±è´¥",h.value.icon=Me(-1).icon,d.value="åŸŽå¸‚æœç´¢å¤±è´¥",u.value=!1}}(l.value)},searchCities:m,fetchByCoordinates:async function(e,t,a){await f(e,t,a,!0)}}},{persist:{pick:["locationMode","customLat","customLon","customCity","refreshInterval","showRainEffect","showThunderEffect","showSnowEffect"]}}),Se={class:"relative w-full max-w-lg bg-neutral-900 border border-white/10 rounded-3xl p-8 text-white overflow-y-auto max-h-[90vh]"},Ce={class:"flex items-center justify-between mb-8"},Te={class:"space-y-8"},Ee={class:"grid grid-cols-3 gap-3"},Ie=["onClick"],Le={key:0,class:"mt-4 grid grid-cols-2 gap-4"},De={class:"space-y-2"},je={class:"space-y-2"},Ne={key:1,class:"mt-4 space-y-2 relative"},Ae={class:"relative"},Oe={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},Fe={key:0,class:"absolute z-10 w-full mt-2 bg-neutral-800 border border-white/10 rounded-xl overflow-hidden shadow-lg"},Pe=["onMousedown"],ze={class:"text-white font-medium"},Re={class:"text-xs text-white/50 mt-1 line-clamp-1"},We={key:1,class:"absolute z-10 w-full mt-2 bg-neutral-800 border border-white/10 rounded-xl px-4 py-3 text-white/50 text-sm"},Je={class:"grid grid-cols-4 gap-2"},He=["onClick"],Ue={class:"grid grid-cols-3 gap-3"},Ve={class:"flex gap-4 pt-4"},Be=["disabled"],Ye=["disabled"],$e=s({__name:"WeatherSettingsModal",props:{show:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const a=e,l=t,s=_e(),{loading:o}=M(s),v=n({locationMode:s.locationMode,customLat:s.customLat,customLon:s.customLon,customCity:s.customCity,refreshInterval:s.refreshInterval,showRainEffect:s.showRainEffect,showThunderEffect:s.showThunderEffect,showSnowEffect:s.showSnowEffect}),f=n(""),g=n([]),y=n(!1),b=n(!1);let k=null,j=0;async function N(){const e=f.value.trim();if(k&&(clearTimeout(k),k=null),!e)return g.value=[],b.value=!1,void(y.value=!1);j++;const t=j;k=setTimeout(async()=>{if(t===j&&f.value.trim()===e){y.value=!0,b.value=!0;try{const a=await s.searchCities(e);t===j&&f.value.trim()===e&&(g.value=a)}catch(a){t===j&&(g.value=[])}finally{t===j&&(y.value=!1)}}},500)}function A(){setTimeout(()=>{b.value=!1},200)}function O(){s.$patch({locationMode:v.value.locationMode,customLat:v.value.customLat,customLon:v.value.customLon,customCity:v.value.customCity,refreshInterval:v.value.refreshInterval,showRainEffect:v.value.showRainEffect,showThunderEffect:v.value.showThunderEffect,showSnowEffect:v.value.showSnowEffect}),l("close"),s.updateWeather()}async function F(){s.$patch({locationMode:v.value.locationMode,customLat:v.value.customLat,customLon:v.value.customLon,customCity:v.value.customCity}),await s.updateWeather()}return x(()=>a.show,e=>{e&&(v.value={locationMode:s.locationMode,customLat:s.customLat,customLon:s.customLon,customCity:s.customCity,refreshInterval:s.refreshInterval,showRainEffect:s.showRainEffect,showThunderEffect:s.showThunderEffect,showSnowEffect:s.showSnowEffect},f.value=v.value.customCity||"",g.value=[],b.value=!1)}),x(()=>v.value.locationMode,e=>{"city"!==e&&(f.value="",g.value=[],b.value=!1)}),(t,a)=>e.show?(r(),i("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4",onTouchstart:a[9]||(a[9]=S(()=>{},["stop"])),onTouchend:a[10]||(a[10]=S(()=>{},["stop"])),onMousedown:a[11]||(a[11]=S(()=>{},["stop"])),onMouseup:a[12]||(a[12]=S(()=>{},["stop"]))},[c("div",{class:"absolute inset-0 bg-black/80",onClick:a[0]||(a[0]=e=>t.$emit("close"))}),c("div",Se,[c("div",Ce,[a[13]||(a[13]=c("h2",{class:"text-3xl font-medium tracking-wide"}," å¤©æ°”è®¾ç½® ",-1)),c("button",{class:"p-2 hover:bg-white/10 rounded-full transition-colors",onClick:a[1]||(a[1]=e=>t.$emit("close"))},[d(h(C),{class:"w-6 h-6"})])]),c("div",Te,[c("section",null,[a[18]||(a[18]=c("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," ä½ç½®èŽ·å–æ–¹å¼ ",-1)),c("div",Ee,[(r(),i(p,null,m(["auto","coords","city"],e=>c("button",{key:e,class:w(["p-2 rounded-xl border transition-all text-center",v.value.locationMode===e?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:t=>v.value.locationMode=e},u("auto"===e?"è‡ªåŠ¨å®šä½":"coords"===e?"ç»çº¬åº¦":"åŸŽå¸‚å"),11,Ie)),64))]),"coords"===v.value.locationMode?(r(),i("div",Le,[c("div",De,[a[14]||(a[14]=c("label",{class:"text-xs text-white/40 block ml-1"},"ç»åº¦ (Longitude)",-1)),T(c("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>v.value.customLon=e),type:"number",step:"0.0001",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30"},null,512),[[E,v.value.customLon,void 0,{number:!0}]])]),c("div",je,[a[15]||(a[15]=c("label",{class:"text-xs text-white/40 block ml-1"},"çº¬åº¦ (Latitude)",-1)),T(c("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>v.value.customLat=e),type:"number",step:"0.0001",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30"},null,512),[[E,v.value.customLat,void 0,{number:!0}]])]),a[16]||(a[16]=c("div",{class:"space-y-2 text-xs text-white/40 flex items-center col-span-2"},[I(" èŽ·å–ç»çº¬åº¦ : "),c("a",{href:"https://lbs.baidu.com/maptool/getpoint",target:"_blank",class:"text-blue-500 ml-1"},"https://lbs.baidu.com/maptool/getpoint")],-1))])):_("",!0),"city"===v.value.locationMode?(r(),i("div",Ne,[a[17]||(a[17]=c("label",{class:"text-xs text-white/40 block ml-1"},"åŸŽå¸‚åç§° (ä¾‹å¦‚: åŒ—äº¬ã€çº½çº¦ã€Londonã€Tokyo)",-1)),c("div",Ae,[T(c("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>f.value=e),type:"text",placeholder:"è¾“å…¥åŸŽå¸‚åç§°ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼‰",class:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-white/30 placeholder:text-white/20",onInput:N,onFocus:a[5]||(a[5]=e=>b.value=g.value.length>0),onBlur:A},null,544),[[E,f.value]]),y.value?(r(),i("div",Oe,[d(h(L),{class:"w-4 h-4 animate-spin text-white/40"})])):_("",!0)]),b.value&&g.value.length>0?(r(),i("div",Fe,[(r(!0),i(p,null,m(g.value,(e,t)=>(r(),i("div",{key:t,class:"px-4 py-3 hover:bg-white/10 cursor-pointer transition-colors border-b border-white/5 last:border-b-0",onMousedown:S(t=>function(e){v.value.customCity=e.name,f.value=e.name,g.value=[],b.value=!1,s.$patch({customLat:e.latitude,customLon:e.longitude})}(e),["prevent"])},[c("div",ze,u(e.name),1),c("div",Re,u(e.displayName),1)],40,Pe))),128))])):_("",!0),b.value&&!y.value&&0===g.value.length&&f.value.trim()?(r(),i("div",We," æœªæ‰¾åˆ°ç›¸å…³åŸŽå¸‚ ")):_("",!0)])):_("",!0)]),c("section",null,[a[19]||(a[19]=c("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," å¤©æ°”æ›´æ–°é¢‘çŽ‡ ",-1)),c("div",Je,[(r(),i(p,null,m([5,10,20,30],e=>c("button",{key:e,class:w(["py-2 px-1 rounded-xl border transition-all text-center text-sm",v.value.refreshInterval===e?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:t=>v.value.refreshInterval=e},u(e)+"åˆ† ",11,He)),64))])]),c("section",null,[a[23]||(a[23]=c("h3",{class:"text-white/50 mb-4 uppercase tracking-widest text-sm font-medium"}," å¤©æ°”ç‰¹æ•ˆæ˜¾ç¤º ",-1)),c("div",Ue,[c("div",{class:w(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",v.value.showRainEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[6]||(a[6]=e=>v.value.showRainEffect=!v.value.showRainEffect)},[...a[20]||(a[20]=[c("span",{class:"text-base"},"ä¸‹é›¨",-1)])],2),c("div",{class:w(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",v.value.showThunderEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[7]||(a[7]=e=>v.value.showThunderEffect=!v.value.showThunderEffect)},[...a[21]||(a[21]=[c("span",{class:"text-base"},"æ‰“é›·",-1)])],2),c("div",{class:w(["flex items-center justify-center p-2 rounded-xl cursor-pointer transition-all duration-300 text-center border",v.value.showSnowEffect?"bg-white text-black border-white":"bg-white/5 border-white/10 hover:bg-white/10"]),onClick:a[8]||(a[8]=e=>v.value.showSnowEffect=!v.value.showSnowEffect)},[...a[22]||(a[22]=[c("span",{class:"text-base"},"ä¸‹é›ª",-1)])],2)])]),c("div",Ve,[c("button",{class:"flex items-center justify-center gap-2 p-4 px-6 rounded-2xl bg-white/10 hover:bg-white/20 transition-all font-medium",disabled:h(o),onClick:F},[d(h(L),{class:w(["w-5 h-5",{"animate-spin":h(o)}])},null,8,["class"]),a[24]||(a[24]=I(" ç«‹å³åˆ·æ–°å¤©æ°” ",-1))],8,Be),c("button",{class:w(["flex-1 flex items-center justify-center gap-2 p-4 rounded-2xl font-bold transition-all",y.value||h(o)?"bg-white/30 text-white/50 cursor-not-allowed":"bg-white text-black hover:bg-opacity-90"]),disabled:y.value||h(o),onClick:O},[d(h(D),{class:"w-5 h-5"}),a[25]||(a[25]=I(" ä¿å­˜å¹¶å…³é—­ ",-1))],10,Ye)])])])],32)):_("",!0)}}),qe={class:"flex items-center justify-center md:justify-start gap-0"},Xe={id:"weather-icon",class:"w-28 h-28 drop-shadow-xl"},Ge=["src","alt"],Ke={id:"weather-text",class:"text-4xl font-semibold tracking-wide"},Qe={id:"location-text",class:"text-md text-white/60 uppercase tracking-widest mt-1 whitespace-nowrap"},Ze={class:"text-blue-400 text-xl tabular-nums"},et={class:"flex items-center justify-center px-4 gap-6"},tt={class:"flex items-end"},at={id:"temp-val",class:"text-8xl font-extralight mr-1"},lt={class:"flex flex-col items-end justify-between gap-2"},st={id:"temp-max",class:"text-3xl font-medium text-red-200"},nt={id:"temp-min",class:"text-3xl font-medium text-blue-200"},ot={class:"flex flex-col justify-center items-center md:items-end gap-3 text-white text-3xl tabular-nums"},it={class:"flex items-center gap-3"},rt={id:"humidity-val"},ct={class:"flex items-center gap-3"},ut={id:"apparent-temp-val"},dt={id:"uv-val"},ht=we(s({__name:"Weather",setup(e){const t=_e(),{weatherData:a,loading:l,locationText:s,weatherInfo:o,refreshInterval:v}=M(t),f=n(!1);let m;function b(){m&&clearInterval(m),m=window.setInterval(t.updateWeather,60*v.value*1e3)}return x(v,()=>{b()}),g(()=>{t.updateWeather(),b()}),y(()=>{clearInterval(m)}),(e,t)=>(r(),i(p,null,[c("div",{id:"weather-container",class:w(["weather-clickable grid grid-cols-1 md:grid-cols-3 gap-3 w-full pt-10 transition-opacity duration-700",{"opacity-30":h(l),"opacity-100":!h(l)}]),onClick:t[0]||(t[0]=e=>f.value=!0)},[c("div",qe,[c("div",Xe,[c("img",{src:h(o).icon,alt:h(o).text,class:"w-full h-full object-contain"},null,8,Ge)]),c("div",null,[c("p",Ke,u(h(o).text),1),c("p",Qe,[I(u(h(s))+" Â· é™é›¨ ",1),c("span",Ze,u(h(a)?h(a).hourly.precipitation_probability[h(a).current_hour_index]:"--")+"%",1)])])]),c("div",et,[c("div",tt,[c("div",at,u(h(a)?Math.round(h(a).current.temperature_2m):"--"),1),t[2]||(t[2]=c("div",{class:"text-3xl font-light opacity-70 mb-12"}," Â°C ",-1))]),c("div",lt,[c("span",st,u(h(a)?Math.round(Math.max(...h(a).hourly.temperature_2m)):"--")+"Â° ",1),c("span",nt,u(h(a)?Math.round(Math.min(...h(a).hourly.temperature_2m)):"--")+"Â° ",1)])]),c("div",ot,[c("div",it,[c("span",rt,u(h(a)?h(a).current.relative_humidity_2m:"--")+"% ",1),d(h(j),{class:"w-8 h-8 text-blue-500/60"})]),c("div",ct,[c("span",ut,u(h(a)?Math.round(h(a).current.apparent_temperature):"--")+"Â°C ",1),d(h(N),{class:"w-8 h-8 text-orange-500/60"}),c("span",dt,u(h(a)?Math.round(h(a).hourly.uv_index[h(a).current_hour_index]):"--"),1),d(h(A),{class:"w-8 h-8 text-yellow-500/60"})])])],2),d($e,{show:f.value,onClose:t[1]||(t[1]=e=>f.value=!1)},null,8,["show"])],64))}}),[["__scopeId","data-v-73a3a1ef"]]),vt={class:"glass-panel h-full p-4 md:p-8 flex flex-col items-center justify-evenly text-white w-full"},ft={class:"flex flex-col md:flex-row items-center md:items-start gap-6 w-full justify-center"},pt={class:"flex items-center gap-4"},mt={class:"date-day-big text-glow"},wt={class:"flex flex-col mt-2"},gt={class:"text-5xl tracking-[0.2em] opacity-90 uppercase"},yt={class:"text-4xl tracking-[0.2em] font-light opacity-70 mt-1"},xt={class:"flex flex-col items-center md:items-start mt-5"},bt={class:"text-5xl font-medium text-white/90 tracking-wider"},kt={class:"text-4xl tracking-[0.2em] font-light opacity-70 mt-2"},Mt={key:0,class:"clock-separator second-separator"},_t=we(s({__name:"ClockWeather",setup(e){const{h1:t,h2:a,m1:l,m2:s,s1:n,s2:o,lunar:v,now:f,showSeconds:m}=ye();function g(){m.value=!m.value}return(e,y)=>(r(),i("div",vt,[c("div",ft,[c("div",pt,[c("div",mt,u(h(f).getDate()),1),c("div",wt,[c("span",gt,u(h(f).toLocaleDateString("zh-CN",{weekday:"long"})),1),c("span",yt,u(h(f).getFullYear())+"å¹´"+u(h(f).getMonth()+1)+"æœˆ ",1)])]),y[0]||(y[0]=c("div",{class:"hidden md:block w-px h-16 mx-16 self-center"},null,-1)),c("div",xt,[c("span",bt,u(h(v).fullDate),1),c("span",kt,u(h(v).year)+u(h(v).month),1)])]),c("div",{class:w(["clock-display text-glow tabular-nums mb-4 cursor-pointer transition-all duration-500",{"with-seconds":h(m)}]),onClick:g},[d(ke,{value:h(t),"show-seconds":h(m),trigger:h(m)?h(f).getTime():Math.floor(h(f).getTime()/6e4)},null,8,["value","show-seconds","trigger"]),d(ke,{value:h(a),"show-seconds":h(m),trigger:h(m)?h(f).getTime():Math.floor(h(f).getTime()/6e4)},null,8,["value","show-seconds","trigger"]),y[1]||(y[1]=c("div",{class:"clock-separator"}," : ",-1)),d(ke,{value:h(l),"show-seconds":h(m),trigger:h(m)?h(f).getTime():Math.floor(h(f).getTime()/6e4)},null,8,["value","show-seconds","trigger"]),d(ke,{value:h(s),"show-seconds":h(m),trigger:h(m)?h(f).getTime():Math.floor(h(f).getTime()/6e4)},null,8,["value","show-seconds","trigger"]),h(m)?(r(),i("div",Mt," : ")):_("",!0),h(m)?(r(),i(p,{key:1},[d(ke,{class:"second-digit",value:h(n),"show-seconds":h(m),trigger:h(f).getTime()},null,8,["value","show-seconds","trigger"]),d(ke,{class:"second-digit",value:h(o),"show-seconds":h(m),trigger:h(f).getTime()},null,8,["value","show-seconds","trigger"])],64)):_("",!0)],2),d(ht)]))}}),[["__scopeId","data-v-e2d73c18"]]),St={key:0,class:"new-year-egg-wrapper pointer-events-none fixed inset-0 z-[100]"},Ct={key:0,class:"fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm"},Tt={class:"countdown-number text-[60vh] font-black text-white italic"},Et=we(s({__name:"NewYearEgg",setup(e){const{now:a}=ye(),l=n(!1),s=n(0),h=new Date(2026,1,16,23,59,45).getTime(),v=o(()=>l.value?new Date(h+s.value):a.value),f=o(()=>ne(v.value)),p=o(()=>"é™¤å¤•"===f.value.festival),m=o(()=>"æ˜¥èŠ‚"===f.value.festival),w=o(()=>{const e=v.value,t=e.getMonth(),a=e.getDate(),l=e.getHours(),s=e.getMinutes(),n=e.getSeconds(),o=11===t&&31===a&&23===l&&59===s&&n>=30,i=0===t&&1===a&&0===l&&s<2,r=p.value&&23===l&&59===s&&n>=30,c=m.value&&0===l&&s<2;return o||i||r||c});let b;const k=o(()=>v.value.getSeconds()),M=o(()=>{const e=v.value,t=e.getHours(),a=e.getMinutes(),l=e.getSeconds(),s=23===t&&59===a&&l>=50;return(11===e.getMonth()&&31===e.getDate()||p.value)&&s}),S=o(()=>60-k.value),C=o(()=>{const e=v.value,t=e.getHours(),a=e.getMinutes(),l=0===t&&a<1;return(0===e.getMonth()&&1===e.getDate()||m.value)&&l}),T=n(null);let E=null;class I{constructor(e,a){t(this,"x"),t(this,"y"),t(this,"targetY"),t(this,"color"),t(this,"particles",[]),t(this,"exploded",!1),t(this,"velocity"),this.x=Math.random()*e,this.y=a,this.targetY=Math.random()*(.5*a),this.color="hsl(".concat(360*Math.random(),", 100%, 50%)"),this.velocity=4+4*Math.random()}update(){this.exploded?this.particles.forEach((e,t)=>{e.update(),e.alpha<=0&&this.particles.splice(t,1)}):(this.y-=this.velocity,this.y<=this.targetY&&this.explode())}explode(){this.exploded=!0;for(let e=0;e<50;e++)this.particles.push(new L(this.x,this.y,this.color))}draw(e){this.exploded?this.particles.forEach(t=>t.draw(e)):(e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,2,0,2*Math.PI),e.fill())}}class L{constructor(e,a,l){t(this,"x"),t(this,"y"),t(this,"color"),t(this,"vx"),t(this,"vy"),t(this,"alpha",1),t(this,"gravity",.05),this.x=e,this.y=a,this.color=l;const s=Math.random()*Math.PI*2,n=3*Math.random()+1;this.vx=Math.cos(s)*n,this.vy=Math.sin(s)*n}update(){this.vx*=.98,this.vy*=.98,this.vy+=this.gravity,this.x+=this.vx,this.y+=this.vy,this.alpha-=.015}draw(e){e.globalAlpha=this.alpha,e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,1.5,0,2*Math.PI),e.fill(),e.globalAlpha=1}}const D=[];function j(){if(!T.value)return;const e=T.value;e.width=window.innerWidth,e.height=window.innerHeight}function N(){if(!T.value)return;const e=T.value,t=e.getContext("2d");t&&(t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, 0.2)",t.fillRect(0,0,e.width,e.height),t.globalCompositeOperation="source-over",C.value&&Math.random()<.05&&D.push(new I(e.width,e.height)),D.forEach((e,a)=>{e.update(),e.draw(t),e.exploded&&0===e.particles.length&&D.splice(a,1)}),E=requestAnimationFrame(N))}return x(w,e=>{e?setTimeout(()=>{j(),E||N()},50):E&&(cancelAnimationFrame(E),E=null)},{immediate:!0}),g(()=>{l.value&&l.value&&!b&&(b=window.setInterval(()=>{s.value+=1e3},1e3)),window.addEventListener("resize",j)}),y(()=>{b&&(clearInterval(b),b=void 0),E&&cancelAnimationFrame(E),window.removeEventListener("resize",j)}),(e,t)=>w.value?(r(),i("div",St,[d(O,{name:"scale"},{default:F(()=>[M.value?(r(),i("div",Ct,[c("div",Tt,u(S.value),1)])):_("",!0)]),_:1}),c("canvas",{ref_key:"canvasRef",ref:T,class:"w-full h-full"},null,512)])):_("",!0)}}),[["__scopeId","data-v-59ca3027"]]),It=k("config",()=>{const e=localStorage.getItem("ha_config"),t=n(e?JSON.parse(e):{url:"",token:"",entities:[]});return e&&localStorage.removeItem("ha_config"),{haConfig:t}},{persist:!0}),Lt={class:"bg-neutral-900 p-6 md:p-8 rounded-3xl border border-white/10 w-full max-w-2xl text-white max-h-[90vh] flex flex-col relative"},Dt={class:"flex items-center justify-between mb-6 flex-shrink-0"},jt={class:"flex items-center gap-2"},Nt={class:"space-y-6 overflow-y-auto pr-2 flex-1"},At={key:0,class:"space-y-6"},Ot={class:"space-y-4"},Ft={class:"space-y-3"},Pt={class:"flex flex-col gap-1"},zt=["onClick"],Rt=["onClick"],Wt=["onUpdate:modelValue"],Jt=["onUpdate:modelValue","placeholder"],Ht=["onClick"],Ut={key:1,class:"space-y-3"},Vt=s({__name:"SettingsModal",props:{show:{type:Boolean},entitiesStates:{}},emits:["close","saved"],setup(e,{emit:t}){const a=e,l=t,s=It(),o=n(JSON.parse(JSON.stringify(s.haConfig))),u=n(!1),v=n("");function f(){o.value.entities.push({id:"",name:""})}function w(e,t){const a=e+t;if(a>=0&&a<o.value.entities.length){const t=o.value.entities[e];o.value.entities[e]=o.value.entities[a],o.value.entities[a]=t}}function g(){if(u.value)try{const e=JSON.parse(v.value);if(!e||"object"!=typeof e)throw new Error("Must be an object");o.value.url=e.url||"",o.value.token=e.token||"",o.value.entities=Array.isArray(e.entities)?e.entities:[]}catch(e){return void alert("JSON æ ¼å¼é”™è¯¯ï¼Œä¿å­˜å¤±è´¥")}s.haConfig=JSON.parse(JSON.stringify(o.value)),l("saved"),l("close")}return x(()=>a.show,e=>{e&&(o.value=JSON.parse(JSON.stringify(s.haConfig)))}),x(u,e=>{if(e)v.value=JSON.stringify({url:o.value.url,token:o.value.token,entities:o.value.entities},null,2);else try{const e=JSON.parse(v.value);e&&"object"==typeof e&&(void 0!==e.url&&(o.value.url=e.url),void 0!==e.token&&(o.value.token=e.token),Array.isArray(e.entities)&&(o.value.entities=e.entities))}catch(t){alert("JSON æ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥åŽå†åˆ‡æ¢æ¨¡å¼"),setTimeout(()=>{u.value=!0},0)}}),(t,s)=>e.show?(r(),i("div",{key:0,id:"settings-modal",class:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center p-4 md:p-6 z-[1000]",onTouchstart:s[6]||(s[6]=S(()=>{},["stop"])),onTouchend:s[7]||(s[7]=S(()=>{},["stop"])),onMousedown:s[8]||(s[8]=S(()=>{},["stop"])),onMouseup:s[9]||(s[9]=S(()=>{},["stop"]))},[c("div",{class:"absolute top-0 left-0 right-0 bottom-0 bg-black/80",onClick:s[0]||(s[0]=e=>l("close"))}),c("div",Lt,[c("div",Dt,[s[12]||(s[12]=c("h3",{class:"text-2xl font-bold"}," Home Assistant é…ç½® ",-1)),c("div",jt,[c("button",{class:"text-xs flex items-center gap-1.5 opacity-50 hover:opacity-100 transition-all px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg border border-white/5",onClick:s[1]||(s[1]=e=>u.value=!u.value)},[u.value?(r(),i(p,{key:1},[d(h(z),{class:"w-3.5 h-3.5"}),s[11]||(s[11]=I(" åˆ—è¡¨æ¨¡å¼ ",-1))],64)):(r(),i(p,{key:0},[d(h(P),{class:"w-3.5 h-3.5"}),s[10]||(s[10]=I(" JSON æ¨¡å¼ ",-1))],64))]),c("button",{class:"opacity-50 hover:opacity-100 p-2",onClick:s[2]||(s[2]=e=>l("close"))},[d(h(C),{class:"w-6 h-6"})])])]),c("div",Nt,[u.value?(r(),i("div",Ut,[T(c("textarea",{"onUpdate:modelValue":s[5]||(s[5]=e=>v.value=e),rows:"18",class:"w-full bg-white/5 border border-white/10 text-white font-mono text-sm rounded-xl px-4 py-3 outline-none focus:border-white/30",placeholder:'{"url": "http://...", "token": "...", "entities": [{"id": "light.living_room", "name": "å®¢åŽ…ç¯"}]}'},null,512),[[E,v.value]]),s[17]||(s[17]=c("div",{class:"flex justify-between items-center text-[10px] opacity-30 px-1"},[c("span",null,"æ”¯æŒåœ°å€ã€ä»¤ç‰Œã€è®¾å¤‡åˆ—è¡¨å…¨é‡å¯¼å…¥å¯¼å‡º"),c("span",null,'æ ¼å¼: { "url": "...", "token": "...", "entities": [...] }')],-1)),s[18]||(s[18]=c("div",{class:"mt-4 p-4 bg-orange-500/10 border border-orange-500/20 rounded-xl"},[c("p",{class:"text-xs text-orange-200/60 leading-relaxed"},[c("strong",null,"ðŸ’¡ è·¨åŸŸæç¤ºï¼š"),I(" å¦‚æžœæŽ¥å£æ— æ³•åŠ è½½ï¼Œè¯·ç¡®ä¿åœ¨ Home Assistant çš„ "),c("code",null,"configuration.yaml"),I(" ä¸­é…ç½®äº† "),c("code",null,"cors_allowed_origins"),I("ï¼ŒåŒ…å«å½“å‰çœ‹æ¿çš„è®¿é—®åŸŸåæˆ– IPã€‚ ")])],-1))])):(r(),i("div",At,[c("div",null,[s[13]||(s[13]=c("label",{class:"block text-sm opacity-50 mb-2 uppercase tracking-widest"},"HA åœ°å€",-1)),T(c("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>o.value.url=e),type:"text",placeholder:"http://192.168.1.xxx:8123",class:"w-full bg-white/5 border border-white/10 text-white rounded-xl px-4 py-3 outline-none focus:border-white/30"},null,512),[[E,o.value.url]])]),c("div",null,[s[14]||(s[14]=c("label",{class:"block text-sm opacity-50 mb-2 uppercase tracking-widest"},"é•¿æœŸè®¿é—®ä»¤ç‰Œ",-1)),T(c("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>o.value.token=e),type:"password",placeholder:"è¾“å…¥ä»¤ç‰Œ",class:"w-full bg-white/5 border border-white/10 text-white rounded-xl px-4 py-3 outline-none focus:border-white/30"},null,512),[[E,o.value.token]])]),c("div",Ot,[s[16]||(s[16]=c("label",{class:"block text-sm opacity-50 uppercase tracking-widest"},"è®¾å¤‡åˆ—è¡¨",-1)),c("div",Ft,[(r(!0),i(p,null,m(o.value.entities,(e,t)=>{var l,s,n;return r(),i("div",{key:t,class:"flex gap-2"},[c("div",Pt,[c("button",{class:"p-1 opacity-30 hover:opacity-100 transition-opacity",onClick:e=>w(t,-1)},[d(h(W),{class:"w-4 h-4"})],8,zt),c("button",{class:"p-1 opacity-30 hover:opacity-100 transition-opacity",onClick:e=>w(t,1)},[d(h(J),{class:"w-4 h-4"})],8,Rt)]),T(c("input",{"onUpdate:modelValue":t=>e.id=t,type:"text",class:"flex-1 bg-white/5 border border-white/10 text-white rounded-xl px-4 py-2 outline-none focus:border-white/30",placeholder:"å®žä½“ ID"},null,8,Wt),[[E,e.id]]),T(c("input",{"onUpdate:modelValue":t=>e.name=t,type:"text",class:"w-24 md:w-32 bg-white/5 border border-white/10 text-white rounded-xl px-4 py-2 outline-none focus:border-white/30",placeholder:(null==(n=null==(s=null==(l=a.entitiesStates)?void 0:l[e.id])?void 0:s.attributes)?void 0:n.friendly_name)||"å¤‡æ³¨å"},null,8,Jt),[[E,e.name]]),c("button",{class:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",onClick:e=>function(e){o.value.entities.splice(e,1)}(t)},[d(h(H),{class:"w-5 h-5"})],8,Ht)])}),128)),c("button",{class:"flex items-center gap-2 text-sm opacity-70 hover:opacity-100 transition-all mt-2 bg-white/5 px-4 py-2 rounded-xl w-full justify-center border border-dashed border-white/10 hover:border-white/20",onClick:f},[d(h(R),{class:"w-5 h-5"}),s[15]||(s[15]=I(" æ·»åŠ è®¾å¤‡ ",-1))])])])]))]),c("div",{class:"pt-6 mt-2 border-t border-white/10 flex-shrink-0"},[c("button",{class:"w-full py-4 bg-white text-black font-bold rounded-2xl hover:bg-opacity-90 transition-all shadow-xl",onClick:g}," ä¿å­˜å¹¶åº”ç”¨ ")])])],32)):_("",!0)}}),Bt={class:"glass-panel p-8 md:p-14 flex flex-col items-center text-white h-full justify-start overflow-y-auto w-full"},Yt={class:"flex items-center justify-between w-full mb-10"},$t={class:"flex items-baseline gap-6"},qt={key:0,class:"flex items-center gap-6 opacity-60"},Xt={key:0,class:"flex items-center gap-2"},Gt={class:"text-2xl font-medium tabular-nums"},Kt={key:1,class:"flex items-center gap-2"},Qt={class:"text-2xl font-medium tabular-nums"},Zt={class:"flex gap-4"},ea={key:0,id:"ha-entities",class:"grid grid-cols-2 md:grid-cols-3 gap-6 w-full"},ta=["onClick"],aa={class:"flex items-center justify-between w-full mb-4"},la={key:0,class:"flex gap-4 text-sm font-medium opacity-80"},sa={key:0,class:"flex items-center gap-1.5"},na={class:"text-base"},oa={key:1,class:"flex items-center gap-1.5"},ia={class:"text-base"},ra={class:"flex flex-col overflow-hidden w-full"},ca={class:"font-bold text-lg truncate w-full"},ua={class:"text-sm opacity-50 uppercase tracking-widest"},da={key:1,class:"col-span-full text-center py-20 opacity-50"},ha=we(s({__name:"SmartHome",emits:["openSettings"],setup(e,{expose:t,emit:a}){const l=a,s=It(),{haConfig:v}=M(s),f=n({}),g=n({}),y=n(!1),x=o(()=>{const e=v.value.entities.find(e=>e.id.startsWith("climate."));if(!e)return null;const t=f.value[e.id];if(!t||!t.attributes)return null;const{current_temperature:a,current_humidity:l}=t.attributes;return void 0===a&&void 0===l?null:{temp:a,humi:l}});function b(e){var t;const a=null==(t=f.value[e])?void 0:t.state;return e.startsWith("cover.")?"open"===a:e.startsWith("climate.")?"off"!==a&&"unavailable"!==a:"on"===a}async function k(e){if(v.value.url&&v.value.token)try{const t=await fetch("".concat(v.value.url,"/api/states/").concat(e),{headers:{Authorization:"Bearer ".concat(v.value.token)}}),a=await t.json();f.value[e]=a}catch(t){console.error("HA Fetch Error:",t)}}async function S(){if(y.value=!0,!v.value.url||!v.value.token)return void(y.value=!1);const e=v.value.entities.map(e=>k(e.id));await Promise.all(e),setTimeout(()=>{y.value=!1},500)}return t({updateAllStates:S,entitiesStates:f}),(e,t)=>(r(),i("div",Bt,[c("div",Yt,[c("div",$t,[t[1]||(t[1]=c("h2",{class:"text-4xl font-bold tracking-widest text-nowrap"}," æ™ºèƒ½æŽ§åˆ¶ ",-1)),x.value?(r(),i("div",qt,[void 0!==x.value.temp?(r(),i("div",Xt,[d(h(U),{class:"w-5 h-5 text-orange-400"}),c("span",Gt,u(x.value.temp)+"Â°",1)])):_("",!0),void 0!==x.value.humi?(r(),i("div",Kt,[d(h(j),{class:"w-5 h-5 text-blue-400"}),c("span",Qt,u(x.value.humi)+"%",1)])):_("",!0)])):_("",!0)]),c("div",Zt,[c("button",{class:w(["p-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all",{"opacity-50 pointer-events-none":y.value}]),onClick:S},[d(h(V),{class:w(["w-6 h-6",{"animate-spin":y.value}])},null,8,["class"])],2),c("button",{class:"p-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full transition-all",onClick:t[0]||(t[0]=e=>l("openSettings"))},[d(h(B),{class:"w-6 h-6"})])])]),h(v).url&&h(v).token?(r(),i("div",ea,[(r(!0),i(p,null,m(h(v).entities,e=>{var t,a,l,s,n;return r(),i("div",{key:e.id,class:w(["ha-card",{on:b(e.id),"opacity-50 pointer-events-none":g.value[e.id]}]),onClick:t=>async function(e){const t=e.split(".")[0],a=b(e);let l="";l="cover"===t?a?"close_cover":"open_cover":a?"turn_off":"turn_on",g.value[e]=!0;try{await fetch("".concat(v.value.url,"/api/services/").concat(t,"/").concat(l),{method:"POST",headers:{Authorization:"Bearer ".concat(v.value.token),"Content-Type":"application/json"},body:JSON.stringify({entity_id:e})}),setTimeout(()=>k(e).then(()=>{g.value[e]=!1}),500)}catch(s){alert("æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œå’Œé…ç½®"),g.value[e]=!1}}(e.id)},[c("div",aa,[c("div",{class:w(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",b(e.id)?"bg-white text-black":"bg-white/10 text-white"])},[g.value[e.id]?(r(),Y(h($),{key:0,class:"w-6 h-6 animate-spin"})):(r(),Y(q((s=e.id.split(".")[0],n=b(e.id),"light"===s?n?X:G:"switch"===s?K:"fan"===s?Q:"media_player"===s?Z:"cover"===s?ee:"climate"===s?te:A)),{key:1,class:"w-6 h-6"}))],2),e.id.startsWith("climate.")&&(null==(t=f.value[e.id])?void 0:t.attributes)?(r(),i("div",la,[void 0!==f.value[e.id].attributes.current_temperature?(r(),i("div",sa,[d(h(U),{class:"w-4 h-4 text-orange-400"}),c("span",na,u(f.value[e.id].attributes.current_temperature)+"Â°",1)])):_("",!0),void 0!==f.value[e.id].attributes.current_humidity?(r(),i("div",oa,[d(h(j),{class:"w-4 h-4 text-blue-400"}),c("span",ia,u(f.value[e.id].attributes.current_humidity)+"%",1)])):_("",!0)])):_("",!0)]),c("div",ra,[c("span",ca,u(e.name||f.value[e.id]&&f.value[e.id].attributes&&f.value[e.id].attributes.friendly_name||e.id),1),c("span",ua,[e.id.startsWith("climate.")&&b(e.id)?(r(),i(p,{key:0},[I(u((null==(l=null==(a=f.value[e.id])?void 0:a.attributes)?void 0:l.temperature)?"".concat(f.value[e.id].attributes.temperature,"Â°C"):"å·²å¼€å¯"),1)],64)):(r(),i(p,{key:1},[I(u(b(e.id)?"å·²å¼€å¯":"å·²å…³é—­"),1)],64))])])],10,ta)}),128))])):(r(),i("div",da,[...t[2]||(t[2]=[c("p",null,"è¯·ç‚¹å‡»å³ä¸Šè§’è®¾ç½® Home Assistant åœ°å€å’Œä»¤ç‰Œ",-1)])]))]))}}),[["__scopeId","data-v-e49d6d66"]]),va={class:"weather-effects-container pointer-events-none fixed inset-0 z-0 overflow-hidden"},fa=we(s({__name:"WeatherEffects",setup(e){const t=_e(),{weatherData:a,showRainEffect:l,showThunderEffect:s,showSnowEffect:u}=M(t),d=o(()=>{var e,t,l;return null!=(l=null==(t=null==(e=a.value)?void 0:e.current)?void 0:t.weather_code)?l:-1}),h=o(()=>{if(!l.value)return!1;const e=d.value;return e>=51&&e<=67||e>=80&&e<=82||e>=95&&e<=99}),v=o(()=>{if(!u.value)return!1;const e=d.value;return e>=71&&e<=77||85===e||86===e}),f=o(()=>{if(!s.value)return!1;const e=d.value;return 95===e||96===e||99===e}),p=o(()=>{const e=d.value;return 65===e||82===e||99===e?150:63===e||81===e||96===e?100:e>=51&&e<=55?40:80}),m=o(()=>{const e=d.value;return 75===e||86===e?100:73===e?60:30}),b=n(!1),k=n(!1);let S=[];const C=n(null);let T=null,E=null,I=[],L=[];function D(){if(!C.value)return;const e=C.value;if(e.width=window.innerWidth,e.height=window.innerHeight,h.value){const t=p.value,a=t<=40?5:t<=100?7:10;I=[];for(let l=0;l<t;l++)I.push({x:Math.random()*e.width,y:Math.random()*e.height,l:20+15*Math.random(),v:a+Math.random()*a})}if(v.value){const t=m.value;L=[];for(let a=0;a<t;a++)L.push({x:Math.random()*e.width,y:Math.random()*e.height,r:2+3*Math.random(),v:1+2*Math.random(),w:.5+1*Math.random(),o:Math.random()*Math.PI*2})}}function j(){if(!C.value)return;const e=C.value,t=e.getContext("2d");if(t){if(t.clearRect(0,0,e.width,e.height),f.value&&k.value&&function(e){k.value&&0!==S.length&&(e.save(),e.shadowBlur=15,e.shadowColor="rgba(255, 255, 255, 1)",e.strokeStyle="rgba(255, 255, 255, 0.8)",e.lineWidth=4,e.lineCap="round",e.lineJoin="round",S.forEach(t=>{e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let a=1;a<t.length;a++)e.lineTo(t[a].x,t[a].y);e.stroke()}),e.shadowBlur=0,e.strokeStyle="#ffffff",e.lineWidth=2,S.forEach(t=>{e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let a=1;a<t.length;a++)e.lineTo(t[a].x,t[a].y);e.stroke()}),e.restore())}(t),h.value){t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=1.5,t.lineCap="round";for(let a=0;a<I.length;a++){const l=I[a];t.beginPath(),t.moveTo(l.x,l.y);const s=.15*l.v;t.lineTo(l.x+2*s,l.y+l.l),t.stroke(),l.y+=l.v,l.x+=s,l.y>e.height&&(l.y=-l.l,l.x=Math.random()*e.width)}}if(v.value){t.fillStyle="rgba(255, 255, 255, 0.8)";for(let a=0;a<L.length;a++){const l=L[a];t.beginPath(),t.arc(l.x,l.y,l.r,0,2*Math.PI),t.fill(),l.y+=l.v,l.x+=Math.sin(l.o+l.y/50)*l.w,l.y>e.height&&(l.y=-l.r,l.x=Math.random()*e.width)}}T=requestAnimationFrame(j)}}function N(){if(!f.value)return;!function(){const e=100+200*Math.random(),t=C.value?.6*C.value.height:400,a=[];let l=Math.random()*(window.innerWidth-e)+e/2,s=50*Math.random();const n=5+Math.floor(5*Math.random()),o=t/n;a.push({x:l,y:s});const i=[];for(let r=1;r<=n;r++)if(l+=60*(Math.random()-.5),s+=o,a.push({x:l,y:s}),Math.random()>.7&&r<n){const e=[];e.push({x:l,y:s});const t=l+80*(Math.random()-.5),a=s+.5*o;e.push({x:t,y:a}),i.push(e)}i.push(a),S=i}(),k.value=!0,b.value=!0,setTimeout(()=>{b.value=!1,k.value=!1},50),setTimeout(()=>{b.value=!0,k.value=!0},100),setTimeout(()=>{b.value=!1,k.value=!1},150),setTimeout(()=>{b.value=!0,k.value=!0},200),setTimeout(()=>{b.value=!1,k.value=!1},400);const e=3e3+7e3*Math.random();E=window.setTimeout(N,e)}return x([h,p,v,m],()=>{D()}),x(f,e=>{e?N():E&&(clearTimeout(E),E=null,b.value=!1)},{immediate:!0}),g(()=>{D(),j(),window.addEventListener("resize",D)}),y(()=>{E&&clearTimeout(E),T&&cancelAnimationFrame(T),window.removeEventListener("resize",D)}),(e,t)=>(r(),i("div",va,[f.value?(r(),i("div",{key:0,class:w(["flash-overlay absolute inset-0 bg-white opacity-0 transition-opacity duration-75",{"opacity-10":b.value}])},null,2)):_("",!0),c("canvas",{ref_key:"canvasRef",ref:C,class:"absolute inset-0 w-full h-full"},null,512)]))}}),[["__scopeId","data-v-5cc21d15"]]),pa={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},ma={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},wa={class:"slide-page w-screen h-screen flex items-center justify-center flex-shrink-0"},ga=ae(we(s({__name:"App",setup(e){const t=n(1),a=n(!1),l=n(null),s=n(null),u=_e(),{weatherData:h,showRainEffect:v,showThunderEffect:f,showSnowEffect:p}=M(u),m=o(()=>{var e,t;if(!h.value)return!1;const a=null!=(t=null==(e=h.value.current)?void 0:e.weather_code)?t:-1;if(v.value){if(a>=51&&a<=67||a>=80&&a<=82||a>=95&&a<=99)return!0}if(p.value){if(a>=71&&a<=77||85===a||86===a)return!0}if(f.value){if(95===a||96===a||99===a)return!0}return!1});let w=0,x=null;function k(){x&&(clearTimeout(x),x=null),1!==t.value&&(x=window.setTimeout(()=>{S(1)},3e4))}function S(e){t.value=e,k(),0===e&&l.value&&l.value.updateAllStates(),2===e&&s.value&&s.value.refreshToday()}function C(e){w=e.touches[0].clientX,k()}function T(e){const a=e.changedTouches[0].clientX,l=w-a;Math.abs(l)>50&&(l>0&&t.value<2?S(t.value+1):l<0&&t.value>0&&S(t.value-1))}function E(e){w=e.clientX,k()}function I(e){const a=w-e.clientX;Math.abs(a)>50&&(a>0&&t.value<2?S(t.value+1):a<0&&t.value>0&&S(t.value-1))}function L(){l.value&&l.value.updateAllStates()}return g(()=>{window.addEventListener("keydown",k),window.addEventListener("click",k)}),y(()=>{window.removeEventListener("keydown",k),window.removeEventListener("click",k),x&&clearTimeout(x)}),(e,n)=>{var o;return r(),i("div",{class:"viewport-container overflow-hidden relative w-screen h-screen bg-black",onTouchstart:C,onTouchend:T,onMousedown:E,onMouseup:I},[c("div",{class:"main-slider flex h-full transition-transform duration-700 cubic-bezier",style:b({transform:"translateX(-".concat(100*t.value,"vw)"),width:"300vw"})},[c("div",pa,[d(ha,{ref_key:"smartHomeRef",ref:l,onOpenSettings:n[0]||(n[0]=e=>a.value=!0)},null,512)]),c("div",ma,[d(_t)]),c("div",wa,[d(ge,{ref_key:"calendarRef",ref:s},null,512)])],4),d(Et),m.value?(r(),Y(fa,{key:0})):_("",!0),d(Vt,{show:a.value,"entities-states":(null==(o=l.value)?void 0:o.entitiesStates)||{},onClose:n[1]||(n[1]=e=>a.value=!1),onSaved:L},null,8,["show","entities-states"])],32)}}}),[["__scopeId","data-v-1b284102"]])),ya=le();ya.use(se),ga.use(ya),ga.mount("#app");export{a as __vite_legacy_guard};
